PROCESSOR 16F876A

;STATUS REG, PORTB
STATUS 	EQU	03H
RP0		EQU	.5
PORTB		EQU	06H
TRISB		EQU	86H

;INTCON_REG
INTCON	EQU	0BH
TMR0		EQU	01H
GIE		EQU	.7
INF		EQU 	.2
TOIE		EQU 	.5

;OPTION_REG
OPTION_REG	EQU	81H
PS0		EQU	.0
PS1		EQU	.1
PS2		EQU	.2
TOCS		EQU	.6

;OPTION BITS
W	EQU .0
F	EQU .1

;USER BITS
W_TEMP	EQU	20H
STATUS_TEMP	EQU	21H
VARIABLES   EQU   22H
VARIABLES2   EQU   23H
;MAIN PROGRAM

ORG     0x00

GOTO MAIN
MOVLW 0x05
MOVWF VARIABLES
ORG	04H


;PUSH
MOVWF	W_TEMP
SWAPF	STATUS,W
MOVWF	STATUS_TEMP


DECFSZ VARIABLES,F
GOTO LP1
 
LP2
MOVLW	0x01
MOVWF PORTB

MOVLW 0x05
MOVWF VARIABLES2

GOTO SKIP
LP1
MOVLW	0x00
MOVWF PORTB
INCF	VARIABLES,F
DECFSZ VARIABLES2,F
GOTO LABLE
GOTO SKIP

LABLE 
MOVLW 0x05
MOVWF VARIABLES
GOTO SKIP


SKIP
;POP
SWAPF	STATUS_TEMP,W
MOVWF	STATUS
SWAPF	W_TEMP,F
SWAPF	W_TEMP,W
BCF	INTCON,2
RETFIE

MAIN

BSF	STATUS,RP0
MOVLW	0x00
MOVWF	TRISB
MOVLW	0x07
MOVWF	OPTION_REG
BCF STATUS,RP0
MOVLW	0x00
MOVWF	PORTB
MOVLW	0x06
MOVWF	TMR0
BSF INTCON,5
BSF INTCON,7

LP
GOTO LP

END