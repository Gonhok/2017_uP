	PROCESSOR	16F876A
;BANK0	
PCL	EQU	02H
STATUS	EQU	03H
PORTA	EQU	05H
PORTC	EQU	07H
;BANK1
TRISA	EQU	85H
TRISC	EQU	87H
ADCON1	EQU	9FH
;STATUS BITS
RP1	EQU	6
RP0	EQU	5
ZF	EQU	2
DC	EQU	1
CF	EQU	0
;
W	EQU	.0
F	EQU	.1
;
DBUF	EQU	21H
DBUF1	EQU	22H
DBUF2	EQU	23H

;MAIN PROGRAM
	ORG	0000
	BSF	STATUS,RP0
	MOVLW	B'00000111'
	MOVWF	ADCON1
	MOVLW	B'00101111'
	MOVWF	TRISA
	MOVLW	B'00000000'
	MOVWF	TRISC
	BCF	STATUS,RP0
;초기화
	CLRF	PORTA
	CLRF	PORTC

;
MAIN	BTFSC	PORTA,5
	GOTO	TOGOFF	;토글OFF
	GOTO	TOGON		;토글ON
	
TOGOFF
	MOVLW	B'11111110'
	MOVWF	PORTC
	BSF	PORTA,4
	CALL	DELAY
	BCF	PORTA,4
	CALL	DELAY
	GOTO	MAIN
	
TOGON
	MOVF	PORTA,W	;A값 읽기
	ANDLW	0FH		;A값 정리/CONV에 있음 
	CALL	CONV		;SEGMENT값 변환
	MOVWF	PORTC
	BSF	PORTA,4
	CALL	DELAY
	BCF	PORTA,4
	GOTO	MAIN
	
DELAY
	MOVLW	.5
	MOVWF	DBUF
LP1	MOVLW	.125
	MOVWF	DBUF1
LP2	MOVLW	.200
	MOVWF	DBUF2
LP3	NOP
	DECFSZ	DBUF2,F
	GOTO	LP3
	DECFSZ	DBUF1,F
	GOTO	LP2
	DECFSZ	DBUF,F
	GOTO	LP1
	RETURN

CONV
	ANDLW	0FH
	ADDWF	PCL,F
	
	RETLW	B'01110001'	;0000'F
	RETLW	B'01100001'	;0001'E
	RETLW	B'10000101'	;0010'd
	RETLW	B'01100011'	;0011'C
	RETLW	B'11000001'	;0100'b
	RETLW	B'00010001'	;0101'A
	RETLW	B'00001001'	;0110'9
	RETLW	B'00000001'	;0111'8
	RETLW	B'00011011'	;1000'7
	RETLW	B'01000001'	;1001'6
	RETLW	B'01001001'	;1010'5
	RETLW	B'10011001'	;1011'4
	RETLW	B'00001101'	;1100'3
	RETLW	B'00100101'	;1101'2
	RETLW	B'10011111'	;1110'1
	RETLW	B'00000011'	;1111'0
	
	END